<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://binnes.github.io/esp8266Workshop/part3/DASHBOARD/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Dashboards - ESP8266 IoT Workshop</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="../..">ESP8266 IoT Workshop</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Part 1 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../part1/" class="dropdown-item">Intro</a>
</li>
                                    
<li>
    <a href="../../part1/PREREQ/" class="dropdown-item">Setup for the Workshop</a>
</li>
                                    
<li>
    <a href="../../part1/FIRSTAPP/" class="dropdown-item">Intro to ESP8266</a>
</li>
                                    
<li>
    <a href="../../part1/WIFI/" class="dropdown-item">ESP8266 WiFi</a>
</li>
                                    
<li>
    <a href="../../part1/LED/" class="dropdown-item">LED Light</a>
</li>
                                    
<li>
    <a href="../../part1/DHT/" class="dropdown-item">Sensor</a>
</li>
                                    
<li>
    <a href="../../part1/IOTCLOUD/" class="dropdown-item">IBM Cloud</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Part 2 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../part2/" class="dropdown-item">Intro</a>
</li>
                                    
<li>
    <a href="../../part2/DEVICE/" class="dropdown-item">Device setup on Cloud</a>
</li>
                                    
<li>
    <a href="../../part2/APP/" class="dropdown-item">Creating the ESP8266 Application</a>
</li>
                                    
<li>
    <a href="../../part2/MQTT/" class="dropdown-item">Intro to MQTT</a>
</li>
                                    
<li>
    <a href="../../part2/CERT1/" class="dropdown-item">IoT Security</a>
</li>
                                    
<li>
    <a href="../../part2/CERT2/" class="dropdown-item">Client Certificates</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Part 3 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../" class="dropdown-item">Intro</a>
</li>
                                    
<li>
    <a href="../NODERED/" class="dropdown-item">Node-RED</a>
</li>
                                    
<li>
    <a href="../DHTDATA/" class="dropdown-item">Sensor Data</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Dashboards</a>
</li>
                                    
<li>
    <a href="../CLOUDANT/" class="dropdown-item">Database</a>
</li>
                                    
<li>
    <a href="../HISTORY/" class="dropdown-item">Historical Data</a>
</li>
                                    
<li>
    <a href="../INTERVAL/" class="dropdown-item">Reporting interval</a>
</li>
                                    
<li>
    <a href="../LED/" class="dropdown-item">Remote LED control</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Part 4 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../part4/" class="dropdown-item">Intro</a>
</li>
                                    
<li>
    <a href="../../part4/STUDIO/" class="dropdown-item">Watson Studio</a>
</li>
                                    
<li>
    <a href="../../part4/TRAINING/" class="dropdown-item">Create Training Data</a>
</li>
                                    
<li>
    <a href="../../part4/JUPYTER/" class="dropdown-item">Jupyter Notebooks</a>
</li>
                                    
<li>
    <a href="../../part4/MODEL/" class="dropdown-item">Run model on device</a>
</li>
                                    
<li>
    <a href="../../part4/SUMMARY/" class="dropdown-item">Workshop Summary</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../DHTDATA/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../CLOUDANT/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/binnes/esp8266Workshop/edit/master/docs/part3/DASHBOARD.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#node-red-dashboard-charts-plot-environmental-sensor-data" class="nav-link">Node-RED Dashboard Charts - Plot Environmental Sensor Data</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#lab-objectives" class="nav-link">Lab Objectives</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#introduction" class="nav-link">Introduction</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="node-red-dashboard-charts-plot-environmental-sensor-data">Node-RED Dashboard Charts - Plot Environmental Sensor Data</h1>
<h2 id="lab-objectives">Lab Objectives</h2>
<p>In this lab you will import Node-RED flows which create Dashboard Charts. After learning about Node-RED Dashboard Charts, you will be able to display temperature and humidity graphs of the Device environmental sensors.  You will learn:</p>
<ul>
<li>How to create a Node-RED Dashboard</li>
<li>Experiment with Chart types</li>
<li>Plot Real Time sensor data</li>
<li>Trigger alerts when the real-time sensor data exceeds a threshold value</li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>In this section you will learn about Node-RED Dashboard Charts and then create a chart to graph the sensor data arriving from the device.</p>
<h3 id="step-1-import-the-node-red-dashboard-chart-flows">Step 1 - Import the Node-RED Dashboard Chart Flows</h3>
<p>Open the “Get the Code” github URL listed below, mark or Ctrl-A to select all of the text, and copy the text for the flow to your Clipboard. Recall from a previous section, click on the Node-RED Menu, then Import, then Clipboard. Paste the text of the flow into the Import nodes dialog and press the red Import button. Finally, click on the red <strong>Deploy</strong> button in the upper right corner.</p>
<p>Node-RED Dashboard Charts : <a href="../flows/NRD-Charts-DHTSensorData.json">Get the Code</a></p>
<h3 id="step-2-learn-about-various-node-red-dashboard-chart-types">Step 2 - Learn about various Node-RED Dashboard Chart types</h3>
<ul>
<li>You might have noticed that the flow import in the prior step actually created three tabs.  These are called Node-RED flows.</li>
<li>The <strong>Chart Intro</strong> flow introduces you to the various Node-RED Dashboard Chart types that are available.  You can create Line charts, various Pie chart styles – Pie, Donut, Polar Area, Radar - and vertical and horizontal Bar charts.
 <img alt="Node-RED Chart Intro" src="../screenshots/Node-RED-ChartIntro-flow.png" /></li>
<li>For illustration, the <strong>Fill Single Chart Array</strong> function node above fills an array of static sample data and sends the data to the <strong>Chart</strong> node to visualize.</li>
</ul>
<p><img alt="Line chart array" src="../screenshots/NRD-Charts-Intro-Flow-LineChartArray.png" /></p>
<ul>
<li>The Node-RED flow is not nearly as interesting as the charts that it renders.  To launch the Node-RED Dashboard, in the Node-RED sidebar, turn to the <strong>dashboard</strong> tab and click on the <strong>Launch</strong> button (1) [See two pictures above].
 <img alt="Node-RED Chart Intro" src="../screenshots/Node-RED-ChartIntro-dashboard.png" /></li>
</ul>
<h3 id="step-3-generating-and-displaying-data-in-node-red-dashboards">Step 3 – Generating and Displaying data in Node-RED Dashboards</h3>
<p>The next Node-RED flow - <strong>Dashboard Intro</strong> - uses a variety of UI widgets to display data in the Node-RED Dashboard.  There is a Switch node that turns On/Off a random number generator function node.  The simple random numbers are sent to a line Chart node, a Gauge node, a Slider node, a Text node and, if the number exceeds a threshold, will display an alert notification message.</p>
<p><img alt="Node-RED Dashboard Intro" src="../screenshots/Node-RED-Dashboard-Intro-flow.png" /></p>
<ul>
<li>Turn to the Node-RED Dashboard browser tab that you launched in Step 2, click on the menu tab (2) in the upper left corner, and select the Introduction tab.</li>
<li>On the Introduction dashboard, turn on the <strong>Switch</strong> (3) to start the data visualization.</li>
<li>Experiment with / observe the Dashboard controls.
 <img alt="Node-RED Dashboard Intro dashboard" src="../screenshots/Node-RED-Dashboard-Intro.png" /></li>
</ul>
<h3 id="step-4-plot-device-environmental-sensor-data">Step 4 - Plot Device Environmental Sensor Data</h3>
<p>Now that you have learned about Node-RED Dashboard and Chart types, you are ready to plot the real-time device environmental sensor data.  If you are working in the lite plan on the IBM Cloud memory is limited, so you may want to delete the tabs Chart Intro and Dashboard Intro by double clicking each tab to open up the tab configuration sidebar, where you will find a delete button.</p>
<ul>
<li>Turn to the next flow - <strong>Plot DHT Sensor Data</strong></li>
<li>The <strong>mqtt in</strong> node may need to be configured to pull in the config you created in the previous section.is already configured to receive <em>status</em> Device Events from the ESP8266 Device Type.</li>
<li>The <strong>Change</strong> nodes extract the <code>msg.payload.d.temp</code> and <code>msg.payload.d.humidity</code> values from the JSON object sent over MQTT from the device environmental sensor to Watson IoT Platform.</li>
<li>The environmental sensor values are sent to two charts to plot Temperature and Humidity.
 <img alt="NRD ESP8266 DHT chart flow" src="../screenshots/Node-RED-Dashboard-DHT-flow.png" /></li>
<li>Turn to the Node-RED Dashboard browser tab that you launched in Step 2, click on the tab in the upper left corner, and select the <strong>ESP8266 Workshop</strong> tab.</li>
</ul>
<p><img alt="Temperature and Humidity chart" src="../screenshots/NRD-ESP8266-DHT-TempHum-Chart.png" /></p>
<h3 id="step-5-trigger-alerts-when-real-time-sensor-data-exceeds-a-threshold-value">Step 5 - Trigger Alerts when Real-Time Sensor Data Exceeds a Threshold Value</h3>
<p>Often IoT devices and sensors are deployed so that alerts can be triggered when the real time sensor data exceeds a threshold value.  In this last Step, the flow checks the temperature values and, if the temperature exceeds the threshold, triggers a Node-RED Dashboard notification.</p>
<ul>
<li>In the prior step, the flow included three nodes that have not yet been discussed.</li>
<li>A <strong>Switch</strong> node is configured to <em>Warn on High Values</em> by testing if <code>msg.payload.d.temp</code> is greater than 30C.</li>
<li>A <strong>Template</strong> node is configured to construct a sentence <code>Alert : Critical Value Detected {{payload.d.temp}}</code></li>
<li>The Alert message is sent to a <strong>Node-RED Dashboard Notification</strong> node to display in the browser.</li>
<li>This flow could be extended to call a <strong>Twilio</strong> node to send a SMS message.  It could raise an alarm in another system by triggering a REST API call to the manufacturing production operations systems.</li>
</ul>
<p><img alt="NRD ESP8266 DHT chart flow" src="../screenshots/Node-RED-Dashboard-DHT-flow2.png" /></p>
<ul>
<li>Return to the Node-RED Dashboard <strong>ESP8266 Workshop</strong> tab and increase the temperature of your DHT sensor above 30C.</li>
</ul>
<p><img alt="Temperature and Humidity chart" src="../screenshots/NRD-ESP8266-DHT-TempHum-ChartAlert.png" /></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
